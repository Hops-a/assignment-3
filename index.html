<!DOCTYPE html>
<html>
<head>
    <title>Patient Registration - Mes Medical</title>
    <link href="style.css" rel="stylesheet">
    <script src="validation.js"></script>
</head>
<body>

    <div class="header">
        <div class="logo"></div>
        <h1>Mes Medical</h1>
        Today is: <span id="date"></span>
    </div>

    <div class="main-content">
        <h2>Patient Registration Form</h2>
        
        <form id="patientForm">
            <table>
                <!-- Names -->
                <tr>
                    <td>First Name:*</td>
                    <td>
                        <input type="text" id="firstName" pattern="[A-Za-z\-']{1,30}" 
                            title="Enter first name (letters, apostrophes, dashes only)" 
                            oninput="validateFirstName()" onblur="validateFirstName()" required>
                        <span id="firstNameError" class="error-message"></span>
                    </td>
                    <td>M.I.:</td>
                    <td>
                        <input type="text" id="middleInitial" maxlength="1" pattern="[A-Za-z]?"
                            title="Enter middle initial (optional, one letter)"
                            oninput="validateMiddleInitial()" onblur="validateMiddleInitial()">
                        <span id="middleInitialError" class="error-message"></span>
                    </td>
                    <td>Last Name:*</td>
                    <td>
                        <input type="text" id="lastName" pattern="[A-Za-z\-'2-5]{1,30}"
                            title="Enter last name (letters, dashes, apostrophes, numbers 2-5)" 
                            oninput="validateLastName()" onblur="validateLastName()" required>
                        <span id="lastNameError" class="error-message"></span>
                    </td>
                </tr>
                
                <!-- Date of Birth -->
                <tr>
                    <td>Date of Birth:*</td>
                    <td colspan="5">
                        <input type="date" id="dob" 
                            title="Select date of birth (must be between 120 years ago and today)" 
                            onchange="validateDOB()" onblur="validateDOB()" required>
                        <span id="dobError" class="error-message"></span>
                    </td>
                </tr>
                
                <!-- Patient ID -->
                <tr>
                    <td>Patient ID:*</td>
                    <td colspan="5">
                        <input type="password" id="patientId" pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}"
                            placeholder="XXX-XX-XXXX" title="Enter ID in format XXX-XX-XXXX" 
                            oninput="formatPatientId()" onblur="validatePatientId()" required>
                        <span id="patientIdError" class="error-message"></span>
                    </td>
                </tr>
                
                <!-- Email -->
                <tr>
                    <td>Email:*</td>
                    <td colspan="5">
                        <input type="email" id="email" 
                            pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}"
                            title="Enter email in format name@domain.com" 
                            oninput="validateEmail()" onblur="validateEmail()" required>
                        <span id="emailError" class="error-message"></span>
                    </td>
                </tr>
                
                <!-- Phone -->
                <tr>
                    <td>Phone:*</td>
                    <td colspan="5">
                        <input type="tel" id="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                            placeholder="000-000-0000" title="Enter phone as 000-000-0000" 
                            oninput="formatPhone()" onblur="validatePhone()" required>
                        <span id="phoneError" class="error-message"></span>
                    </td>
                </tr>
                
                <!-- Address -->
                <tr>
                    <td>Address 1:*</td>
                    <td colspan="5">
                        <input type="text" id="address1" minlength="2" maxlength="30"
                            title="Enter street address (2-30 characters)" 
                            oninput="validateAddress1()" onblur="validateAddress1()" required>
                        <span id="address1Error" class="error-message"></span>
                    </td>
                </tr>
                <tr>
                    <td>Address 2:</td>
                    <td colspan="5">
                        <input type="text" id="address2" maxlength="30"
                            title="Enter apt/suite (optional, 2-30 characters if entered)"
                            oninput="validateAddress2()" onblur="validateAddress2()">
                        <span id="address2Error" class="error-message"></span>
                    </td>
                </tr>
                <tr>
                    <td>City:*</td>
                    <td>
                        <input type="text" id="city" pattern="[A-Za-z\s\-]{2,30}"
                            title="Enter city (2-30 characters, letters only)" 
                            oninput="validateCity()" onblur="validateCity()" required>
                        <span id="cityError" class="error-message"></span>
                    </td>
                    <td>State:*</td>
                    <td>
                        <select id="state" title="Select your state" 
                            onchange="validateState()" onblur="validateState()" required>
                            <option value="">Select State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="DC">DC</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="PR">Puerto Rico</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                        <span id="stateError" class="error-message"></span>
                    </td>
                    <td>Zip:*</td>
                    <td>
                        <input type="text" id="zip" pattern="[0-9]{5}(-[0-9]{4})?" maxlength="10"
                            title="Enter ZIP code (5 digits or ZIP+4)" 
                            oninput="formatZip()" onblur="validateZip()" required>
                        <span id="zipError" class="error-message"></span>
                    </td>
                </tr>
            </table>

            <p><strong>Current Symptoms:</strong></p>
            <textarea id="symptoms" rows="3" cols="50" 
                title="Describe symptoms (optional, no quotes allowed)" 
                placeholder="Describe your symptoms..."></textarea>

            <p><strong>Check all that apply - Have you had:</strong></p>
            <label title="Check if you've had fever"><input type="checkbox" name="history" value="Fever"> Fever</label><br>
            <label title="Check if you've had headache"><input type="checkbox" name="history" value="Headache"> Headache</label><br>
            <label title="Check if you've had cough"><input type="checkbox" name="history" value="Cough"> Cough</label><br>
            <label title="Check if you've had sore throat"><input type="checkbox" name="history" value="Sore Throat"> Sore Throat</label><br>
            <label title="Check if you've had body aches"><input type="checkbox" name="history" value="Body Aches"> Body Aches</label><br>
            <label title="Check if you've had fatigue"><input type="checkbox" name="history" value="Fatigue"> Fatigue</label><br>
            <label title="Check if you've had chest pain"><input type="checkbox" name="history" value="Chest Pain"> Chest Pain</label><br>

            <p><strong>Gender:</strong></p>
            <label title="Select male"><input type="radio" name="gender" value="Male"> Male</label>
            <label title="Select female"><input type="radio" name="gender" value="Female"> Female</label>
            <label title="Select other"><input type="radio" name="gender" value="Other"> Other</label>

            <p><strong>COVID-19 Vaccinated?</strong></p>
            <label title="Select yes if vaccinated"><input type="radio" name="vaccinated" value="Yes"> Yes</label>
            <label title="Select no if not vaccinated"><input type="radio" name="vaccinated" value="No"> No</label>

            <p><strong>Have Health Insurance?</strong></p>
            <label title="Select yes if insured"><input type="radio" name="insurance" value="Yes"> Yes</label>
            <label title="Select no if not insured"><input type="radio" name="insurance" value="No"> No</label>

            <p><strong>Health Level (1-10):</strong> <span id="healthValue">5</span></p>
            <input type="range" id="healthScale" min="1" max="10" value="5" 
                title="Slide to rate health (1=poor, 10=excellent)" 
                oninput="updateHealthValue(this.value)">

            <p><strong>User ID:*</strong></p>
            <input type="text" id="userId" pattern="[a-zA-Z][a-zA-Z0-9_\-]{4,29}" minlength="5" maxlength="30"
                title="5-30 characters, start with letter, no spaces" 
                oninput="convertToLowercase(this)" onblur="checkUserId()" required>
            <span id="userIdError" class="error-message"></span>

            <p><strong>Password:*</strong></p>
            <input type="password" id="password" minlength="8" maxlength="30"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#%^&*()\-_+=\\\/><.,`~])[A-Za-z\d!@#%^&*()\-_+=\\\/><.,`~]{8,30}"
                title="8-30 characters, must have uppercase, lowercase, number, special character, no quotes"
                oninput="checkPassword()" onblur="checkPassword()" required>
            <span id="passError" class="error-message"></span>

            <p><strong>Re-enter Password:*</strong></p>
            <input type="password" id="confirmPassword" minlength="8" maxlength="30"
                title="Re-enter password to confirm" 
                oninput="checkPasswordMatch()" onblur="checkPasswordMatch()" required>
            <span id="confirmError" class="error-message"></span>

            <p>
                <button type="button" onclick="reviewForm()">REVIEW</button>
                <button type="button" id="submitBtn" onclick="submitForm()" disabled>SUBMIT</button>
                <button type="reset" onclick="hideReview()">CLEAR AND START OVER</button>
            </p>
        </form>

        <!-- Review Section -->
        <div id="reviewSection" style="display:none;">
            <h2>PLEASE REVIEW THIS INFORMATION</h2>
            <div id="reviewContent"></div>
            <button type="button" onclick="submitForm()">CONFIRM & SUBMIT</button>
            <button type="button" onclick="hideReview()">EDIT FORM</button>
        </div>
    </div>

    <div class="footer">
        Mes Medical - 123 Main St, Houston, TX 77001
        <br>
        <button onclick="alert('Contact: (713) 555-DOCS')">Contact Us</button>
    </div>

    <script>
        // Set date and date range
        document.getElementById('date').innerHTML = new Date().toDateString();
        const today = new Date();
        const maxDate = today.toISOString().split('T')[0];
        const minDate = new Date(today.getFullYear() - 120, today.getMonth(), today.getDate()).toISOString().split('T')[0];
        document.getElementById('dob').setAttribute('max', maxDate);
        document.getElementById('dob').setAttribute('min', minDate);
        
        // Initialize all fields as having errors until validated
        window.onload = function() {
            updateSubmitButton();
        };
    </script>

</body>
</html>